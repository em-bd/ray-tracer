# Ray Tracing Algorithm

This is a Ray-tracing Algorithm created for COM S 3360 at Iowa State University, coded exclusively in C. This Ray-tracer has not been parallelized, so it may be a bit more computationally expensive.

A majority of features were derived from the *Ray Tracing in One Weekend* series by Peter Shirley, Trevor David Black, and Steve Hollasch. Triangle mesh loading and computational concepts were derived from *Physically Based Rendering:From Theory To Implementation*, by Matt Pharr, Wenzel Jakob, and Greg Humphreys.

## Outputs

A variety of test scenes are available from the code within this repository. Some example scenes generated by this project are Bouncing Spheres, Perlins and Emissives, and the Final Scene.

![alt text](bouncing_spheres.png)

Depending on the background chosen (and if any emissive materials are included in the scene), some scenes can also appear very dark.

![alt text](emissive_materials.png)

Additionally, noise can be significantly reduced and scenes can look much more high resolution by changing the definition for the `SAMPLES_PER_PIXEL` value in the `camera.h` file.

![alt text](final_scene.png)

All outputs are generated as 'image.ppm' and can be found in the src directory of the project.

## How To Run

Currently, the project Makefile only supports Linux/MacOS or Windows with MSYS2 MINGW64. Other operating systems or environments were not considered. If you're also a Windows user and don't have the Gnu C Compiler, <a href="https://github.com/msys2/msys2-installer/releases/download/2025-08-30/msys2-x86_64-20250830.exe">here<a> is direct a link to the MSYS2 MINGW64 installer.

If you're running off of Linux/MacOS, first compile the project:

``make``

Running off of Windows with MSYS MINGW64, use this command to compile and then run:

``mingw32-make``

The executable will automatically generate the bouncing spheres scene, but to generate any of the others, here's a list of scenes that can be generated and their corresponding numbers:

1. Bouncing Spheres
2. Two Stacked Checkered Spheres
3. Two Textured Spheres (Perlin Noise & Image Textured)
4. 5 Simple and Colorful Quadrilaterals
5. Perlin Noise Spheres and Emissive Materials
6. Simple Scene with Triangles and an Emissive Quadrilateral
7. Low-Poly Eevee Model
8. Final Scene

The "Final Scene" is the most computationally expensive, so it will take a while before completing, even at 100 samples/pixel. Each scene has the camera configuration set differently, which can be adjusted manually by going into scenes.c and adjusting the parameters in the initialize() functions called at the beginning of each scene.

If no argument or an incorrect argument type is provided after the executable, the default scene will be generated--bouncing spheres.

## Features Implemented

The following features were implemented for this Ray-Tracing algorithm:

- Configurable camera
- Ray/Sphere Intersections
- Ray/Plane Intersections
- Quadrilaterals
- Bounding Volume Hierarchies
- Texture Loading and Rendering
- Triangle Mesh Loading (from .STL files) and Rendering
- Anti-aliasing
- Perlin Noise
- Defocus Blur/Depth of Field
- Motion Blur
- Diffuse, Dielectric, Specular, and Emissive Materials

## External Libraries/Files

All files found in the src/Assets folder where imported elsewhere. Here are references to each in IEEE format:

\[1\]	Project Enhance and DassiD, “Morrowind Enhanced Textures,” 2018. [Online]. Available: 
        https://www.nexusmods.com/morrowind/mods/46221. [Accessed: Dec. 11, 2025].

\[2\]	Sean Barrett, “stb_image.h,” GitHub repository, 2017. [Online]. Available: 
        https://raw.githubusercontent.com/nothings/stb/refs/heads/master/stb_image.h.  
        [Accessed: Dec. 13, 2025].

\[3\]	F. Flowalistik, Low-Poly Eevee, Thingiverse, May 26, 2018. \[Online\]. Available:
        https://www.thingiverse.com/thing:2931434. [Accessed: Dec. 14, 2025].

Going down the list in order, I'll explain what each was used for.

Textures from the "Morrowind Enhanced Texture" mod by Project Enhane (uploaded by DassiD) \[1\] were converted to *.png files using GIMP, and were implemented for both testing and generating spheres with image textures found in scenes 3 and 8.

The "stbh_image.h" file is a lightweight C header file library imported from the "stb" GitHub repository by Sean Barrett \[2\]. This library can be used for loading and reading common image types, such as *.jpg or *.png, and returns a pixel array. Image file types don't compress data the same, so it was essential to find a library that could handle various image file types.

The Low-Poly Eevee model by user Flowalistik (found on Thingiverse) \[3\] was implemented to demonstrate triangle mesh loading and rendering in this Ray-Tracing Algorithm. Currently, this algorithm only supports rendering triangle mesh models from *.stl files.
